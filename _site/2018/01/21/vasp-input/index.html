<!DOCTYPE html>
<html style="filter:grayscale(0%);">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <title>VASP输入文件总结</title>
    <meta name="description" content="整理备查vasp的manual值得一读看资料遇到陌生的参数,查manual就好了INCAR输入参数推荐苏长荣老师的vasp安装和使用说明(后面有索引可以直接查)和官方manual">

    <link rel="shortcut icon" href="/favicon.jpg?" type="image/x-icon">
    <link rel="icon" href="/favicon.jpg?" type="image/x-icon">
    <!---2020-01-17 change font-awesome-->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <!--- 
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    -->
    <link rel="stylesheet" href="/css/cndaqiang.css"> 
	<!---图标cdn icon，每次在iconfont中添加一个图标，这个链接就要更新--->
   <link rel="stylesheet" href="https://at.alicdn.com/t/font_461356_ofctiykkk5.css">
	 <link rel="stylesheet" href="/css/main.css ">
   <link rel="canonical" href="http://localhost:4000/2018/01/21/vasp-input/">
   <link rel="alternate" type="application/rss+xml" title="cndaqiang" href="http://localhost:4000/feed.xml ">

	
	<!---
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<script>
		// 谷歌广告测试
	//	(adsbygoogle = window.adsbygoogle || []).push({
	//		google_ad_client: "ca-pub-8365330523291002",
	//		enable_page_level_ads: true
	//	});
		</script>
	--->

    <script>
    // 百度统计代码
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?8ba332e6517ae0ba8a13339285d97bb3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


    <script>
    // google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-109057291-1', 'auto');
      ga('send', 'pageview');

    </script>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    tex2jax: { inlineMath: [["$","$"],["\\(","\\)"]] },
    "HTML-CSS": {
      linebreaks: { automatic: true, width: "container" }
    }
});
</script>
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!---   谷歌cse站内搜索-->
<!--- <script async src="https://cse.google.com/cse.js?cx=011772597085732398296:uzswyrqhpft"></script>
--->
	

</head>


  <body>

    <div class="wrapper">
    <center>
        <a href= http://www.gov.cn/zhengce/content/2020-04/03/content_5498472.htm>
            <h1> </h1><b> </b>
        </a>
        本站镜像站点        
        <a href="http://blog.cndaqiang.workers.dev//2018/01/21/vasp-input/">cloudflare</a>,
        <a href="http://cndaqiang.gitee.io//2018/01/21/vasp-input/">gitee</a>,
        <a href="https://cndaqiang.github.io//2018/01/21/vasp-input/">Github</a>.
        <a href="https://github.com/cndaqiang/cndaqiang.github.io/">博客源码</a>
    </center>
</div>
<header id="top">
    <div class="wrapper">
      
        <a href="/" class="brand">cndaqiang</a>
        <small>Web Linux DFT</small> 
        
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>文章
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>分类
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>标签
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/collection/">
                        
                            <i class="fa fa-bookmark"></i>收藏
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-heart"></i>关于
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/Search/">
                        
                            <i class="fa fa-icon-sousuo"></i>Search
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <!---文章页面--->

<div class="page clearfix" post>
    <div class="left">
        <h1>VASP输入文件总结</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2018-01-21
            </div>

            <div class="label-card">
                <i class="fa fa-user"></i>cndaqiang
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#DFT" title="Category: DFT" rel="category">DFT</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#vasp" title="Tag: vasp" rel="tag">vasp</a-->
        <a href="/tag/#vasp" title="Tag: vasp" rel="tag">vasp</a>
    
  

</span>


            </div>
            <!--- 2020-01-17 RSS-->
            <div class="label-card">
                <a href="/feed.xml" title="RSS"><i class="fa fa-rss-square" aria-hidden="true"></i>RSS</a>
            </div>

            <div class="label-card">
                <a href="https://github.com/cndaqiang/cndaqiang.github.io" title="RSS"><i class="fa fa-thumbs-o-up" aria-hidden="true"></i>Star</a>
            </div>
            
            <!--- github start , copy from https://github.com/mdo/github-buttons--->
            <!---
            <div>
                <iframe src="/html_script/github-btn.html?user=cndaqiang&repo=cndaqiang.github.io&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>
            </div>
            --->

        </div>
        
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <ul id="markdown-toc">
  <li><a href="#说明" id="markdown-toc-说明">说明</a></li>
  <li><a href="#potcar-赝势" id="markdown-toc-potcar-赝势">POTCAR 赝势</a>    <ul>
      <li><a href="#产生" id="markdown-toc-产生">产生</a></li>
      <li><a href="#说明-1" id="markdown-toc-说明-1">说明</a></li>
    </ul>
  </li>
  <li><a href="#kpoints-k点" id="markdown-toc-kpoints-k点">KPOINTS K点</a>    <ul>
      <li><a href="#产生-1" id="markdown-toc-产生-1">产生</a>        <ul>
          <li><a href="#自动" id="markdown-toc-自动">自动</a></li>
          <li><a href="#line-mode一般仅在计算能带结构时使用" id="markdown-toc-line-mode一般仅在计算能带结构时使用">Line-mode(一般仅在计算能带结构时使用)：</a></li>
          <li><a href="#手动定义各k点的坐标一般仅在计算hse能带结构时使用" id="markdown-toc-手动定义各k点的坐标一般仅在计算hse能带结构时使用">手动定义各K点的坐标(一般仅在计算HSE能带结构时使用)：</a></li>
        </ul>
      </li>
      <li><a href="#说明-2" id="markdown-toc-说明-2">说明</a></li>
    </ul>
  </li>
  <li><a href="#poscar-晶格参数原子位置" id="markdown-toc-poscar-晶格参数原子位置">POSCAR 晶格参数原子位置</a>    <ul>
      <li><a href="#产生-2" id="markdown-toc-产生-2">产生</a></li>
      <li><a href="#格式" id="markdown-toc-格式">格式</a></li>
    </ul>
  </li>
  <li><a href="#incar" id="markdown-toc-incar">INCAR</a>    <ul>
      <li><a href="#systemxxx" id="markdown-toc-systemxxx">system=xxx</a></li>
      <li><a href="#istart-icharg-iniwav" id="markdown-toc-istart-icharg-iniwav">ISTART ICHARG INIWAV</a></li>
      <li><a href="#ediff-ediffg" id="markdown-toc-ediff-ediffg">EDIFF EDIFFG</a></li>
      <li><a href="#ispin-magmom" id="markdown-toc-ispin-magmom">ISPIN MAGMOM</a></li>
      <li><a href="#ibrion-nfree-nsw-isif" id="markdown-toc-ibrion-nfree-nsw-isif">IBRION NFREE NSW ISIF</a></li>
      <li><a href="#nelm" id="markdown-toc-nelm">NELM</a></li>
      <li><a href="#potim" id="markdown-toc-potim">POTIM</a></li>
      <li><a href="#encut-平面波截断能" id="markdown-toc-encut-平面波截断能">ENCUT 平面波截断能</a></li>
      <li><a href="#prec计算精度" id="markdown-toc-prec计算精度">PREC计算精度</a></li>
      <li><a href="#gga-voskown" id="markdown-toc-gga-voskown">GGA VOSKOWN</a></li>
      <li><a href="#ismear-sigma" id="markdown-toc-ismear-sigma">ISMEAR SIGMA</a>        <ul>
          <li><a href="#ismear" id="markdown-toc-ismear">ISMEAR</a></li>
          <li><a href="#sigma" id="markdown-toc-sigma">SIGMA</a></li>
        </ul>
      </li>
      <li><a href="#ncore-npar" id="markdown-toc-ncore-npar">NCORE NPAR</a></li>
      <li><a href="#nwrite" id="markdown-toc-nwrite">NWRITE</a></li>
      <li><a href="#prec" id="markdown-toc-prec">PREC</a></li>
      <li><a href="#lcharg-是否输出chgchgcar" id="markdown-toc-lcharg-是否输出chgchgcar">LCHARG 是否输出CHG,CHGCAR</a></li>
      <li><a href="#lwave-是否输出wavecar" id="markdown-toc-lwave-是否输出wavecar">LWAVE 是否输出WAVECAR</a></li>
      <li><a href="#loribt-是否输出投影波函数到procar-proout" id="markdown-toc-loribt-是否输出投影波函数到procar-proout">LORIBT 是否输出投影波函数到PROCAR PROOUT</a></li>
    </ul>
  </li>
</ul>
<p>整理备查
vasp的<a href="http://cms.mpi.univie.ac.at/vasp/vasp/vasp.html">manual</a>值得一读<br />
看资料遇到陌生的参数,查manual就好了<br />
INCAR输入参数推荐苏长荣老师的vasp安装和使用说明(后面有索引可以直接查)和<a href="http://cms.mpi.univie.ac.at/vasp/vasp/vasp.html">官方manual</a></p>

<h2 id="说明">说明</h2>
<p>输入文件POSCAR，KPOINT，POTCAR，INCAR等,用<code class="highlighter-rouge">#</code>注释</p>
<h2 id="potcar-赝势">POTCAR 赝势</h2>
<h3 id="产生">产生</h3>
<p>来源VASP官网提供<br />
直接拼接赝库,顺序同POSCAR</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat POTCAR_AL POTCAR_N &gt; POTCAR
</code></pre></div></div>
<h3 id="说明-1">说明</h3>
<p>VASP赝势文件夹中包含两个压缩文件：potpaw_LDA和potpaw_PBE<br />
potpaw_LDA ==&gt; PAW, LDA<br />
potpaw_PBE ==&gt; PAW, GGA, PBE<br /></p>

<ul>
  <li>赝势的种类要一致</li>
  <li>赝势使用的泛函要与INCAR中选择的泛函一致（PBE的泛函要选择 PBE的赝势）
<br />即:POTCAR中的LEXCH与INCAR中GGA的设置对应
<br />LEXCH=CA(LDA赝势) GGA不设置 VOSKOWN不设置
<br />LEXCH=91(PW91赝势) GGA=91 VOSKOWN=1
<br />LEXCH=PE GGA=PE VOSKOWN不设置</li>
</ul>

<p>ENMAX截断能</p>

<h2 id="kpoints-k点">KPOINTS K点</h2>
<p><strong>是KPOINTS,不是KPOINT</strong></p>
<ul>
  <li>布里渊区K点采样方式</li>
  <li>K点越多计算消耗的内存越大，在个人笔记本上计算时一定要先用小点的
K点数目试算一下，内存占用大容易死机</li>
</ul>

<h3 id="产生-1">产生</h3>
<h4 id="自动">自动</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Automaticmesh  首行注释
0              0表示自动产生K点
M/G            M表示采用Monkhorst-Pack方法生成K点坐标，G表示一定会取到Γ点
K1 K2 K3       K-mesh取K1xK2xK3网格，
0 0 0            原点平移大小
</code></pre></div></div>
<p>bbs.推荐用G</p>
<ul>
  <li>K1 K2 K3的取值,使得K1xa=K2xb=K3xc，a,b,c为POSCAR中基失长度
<img src="/uploads/2018/01/k1k2k3mesh.jpg" alt="" />
<img src="/uploads/2018/01/k1k2k3mesh2.jpg" alt="" /></li>
  <li><strong>二维材料(c方向上只有一层原子)结构优化和自恰计算时K点可选取NxNx1</strong></li>
</ul>

<h4 id="line-mode一般仅在计算能带结构时使用">Line-mode(一般仅在计算能带结构时使用)：</h4>
<p>例:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>k-pointsforMgO(100)(title) 注释
21             下面两个高对称K点之前插入的K点数目
Line-mode      L表示Line-mode
Rec           字母R打头表示为倒易空间坐标，否则为实空间的坐标)
0.0 0.0 0.0 !Γ   各高对称K点的以及权重
0.5 0.0 0.0 !Z
0.5 0.0 0.0 !Z
0.5 -0.5 0.0 !K
0.5 -0.5 0.0 !K
0.0 -0.5 0.0 !L
0.0 -0.5 0.0 !L
0.0 0.0 0.0 !Γ
</code></pre></div></div>
<p>高对称K点的选取:<br />
可以参考<a href="https://arxiv.org/abs/1004.2974">High-throughput electronic band structure calculations: challenges and tools</a>
<br /><a href="http://muchong.com/bbs/viewthread.php?tid=2337146&amp;fpage=1">小木虫-【原创】k点设置的学习心得</a>
<br />如六角晶格的高对称点
<img src="/uploads/2018/01/hex.png" alt="" />
<br />对应的KPOINTS文件</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Line-mode        #注释
60               #每两个高对称点间产生的K点数
L                #使用Line-mode
Rec              #使用倒格点坐标
0 0 0            #G点/Γ点
-1/3 2/3 0       #M点
-1/3 2/3 0       #M点
1/2 0 0          #K点
1/2 0 0          #K点
0 0 0            #G点/Γ点
</code></pre></div></div>
<p><strong>LH师兄.自己的结构可能因为角度等不同和参考文献中的K点有些不同，可以使用POSCAR-&gt;VESTA-&gt;cif后导入MS，使用MS的Tools/Brillouin Zone Path功能识别高对称K点</strong>，然后对比上面参考文献中的方法，手动添加K点坐标看是否符合自己的结构，如图CoCl2识别的加上我添加的K(0.333 0.333 0)<br />
<img src="/uploads/2018/01/mskpoints.png" alt="" /></p>

<p><strong>说明</strong><br /></p>
<ul>
  <li>只要原胞时一样的，超胞如何构建，高对称点坐标不变</li>
</ul>

<h4 id="手动定义各k点的坐标一般仅在计算hse能带结构时使用">手动定义各K点的坐标(一般仅在计算HSE能带结构时使用)：</h4>

<h3 id="说明-2">说明</h3>
<p>bbs.与结构优化相比,算DOS的时候,需要用到更多的K点数目,这是因为K点越多,画出来的DOS图质量越高
<br />一般来说,K * a = 45 左右之间完全可以满足要求</p>

<h2 id="poscar-晶格参数原子位置">POSCAR 晶格参数原子位置</h2>
<h3 id="产生-2">产生</h3>
<ul>
  <li>文献</li>
  <li>MS建模-cif-VESTA-POSCAR</li>
  <li>数据网站</li>
</ul>

<h3 id="格式">格式</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AlN bulk (Title) 首行注释
1.0   缩放系数
3.11  0.00  0.00    第一个平移矢量a方向
-1.56   2.69  0.00  第二个平移矢量b方向
0.00    0.00  4.98  第三个平移矢量c方向
Al    N 原子种类
2   2   单胞内原子数目
Selective dynamics [可选]有对构型(原子坐标)进行部分优化，没有,则全优化
Direct  Direct分数坐标,Car实际坐标单位为埃
0.667   0.333     0.000    T   T   T  T表示对此方向优化，F表示对此方向不优化
0.333   0.667     0.500    T   T   T
0.667   0.333     0.382    T   T   T
0.333   0.667     0.882    F   F   F
</code></pre></div></div>
<h2 id="incar">INCAR</h2>
<p>计算的方式和内容<br />
可以内容为空保持默认,但不能没有该文件</p>
<h3 id="systemxxx">system=xxx</h3>
<p>注释</p>
<h3 id="istart-icharg-iniwav">ISTART ICHARG INIWAV</h3>
<ul>
  <li>ISTARTT初始波函数产生方法
<br />默认存在WAVECAR时取1,否则0
<br />ISTART=0,根据INIWAV决定初始波函数的产生方法
<br />ISTART=1,波函数从WAVECAR文件读入</li>
  <li>INIWAV初始波函数产生方法
<br />尽在ISTARTT=0生效
<br />0 凝胶波函数
<br />1[默认]随机数</li>
  <li>ICHAGE初始电荷密度产生方法
<br />默认ISTART=0取2否则取0
<br /> 0从初始波函数计算
<br /> 1从CHGCAR(上次输出的电荷密度)读入
<br /> +10非自洽运算,电荷密度在计算过程中保持不变
<br /> 如1+10=11时，电荷密度保持CHGCAR中的值不变,适用于给定电荷密度求能级本征值(计算能带,输出EIGENVAL文件)和态密度(DOS,输出DOSCAR文件),用于能带计算</li>
</ul>

<p>初次计算</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ISTART=0 ICHARG=2
</code></pre></div></div>
<p>程序终止,恢复计算</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ISTART=1 ICHARG=1
</code></pre></div></div>
<p>计算能带最后进行自洽时</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ISTART=1 ICHARG=11
</code></pre></div></div>

<h3 id="ediff-ediffg">EDIFF EDIFFG</h3>
<p>EDIFF,EDIFFG 是控制收敛标准的两个参数。</p>
<ul>
  <li>EDIFF 电子自洽过程(单个离子步内),能量的差别取值为1E-4或者1E-5即可</li>
  <li>EDIFFG 结构优化的过程
<br />力作为收敛标准,此时EDIFFG为负值。一般来说取值在-0.01到-0.05之间
<br /><strong>在做NEB过渡态计算时，使用VTST的优化算法，EDIFFG需要取负值</strong>
<br />使用能量作为标准:此时,EDIFFG 为正值,一般为0.001-0.0001
<br />如EDIFFG=-0.03或EDIFF=0.001，常EDIFF=1E-5,EDIFFG=1E-4,EDIFFG=-0.02</li>
</ul>

<h3 id="ispin-magmom">ISPIN MAGMOM</h3>
<p>由体系决定<br />
ISPIN=0(默认) 不考虑自旋
<br />ISPIN=2 考虑自旋，电子分为α,β电子计算计算,考虑磁性
<br />当ISPIN=2时,可指定体系的初始磁矩MAGMOM</p>
<ul>
  <li>格式
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MAGMOM=原子种类1*自旋磁矩 原子种类2*自旋磁矩 ...
</code></pre></div>    </div>
  </li>
  <li>对于简单体系来说，MAGMOM可以采用默认值；</li>
  <li>MAGMOM设置的时候，初始值不要求与实验值完全一致，一般取大些（1.5倍）比较好</li>
</ul>

<h3 id="ibrion-nfree-nsw-isif">IBRION NFREE NSW ISIF</h3>
<p>如果体系不收敛,或者计算不符合物理图像时,进行结构优化,调整IBRION的值</p>
<ul>
  <li>IBRION=3：你的初始结构很差的时候；</li>
  <li>IBRION=2：共轭梯度算法，很可靠的一个选择，一般来说都用它。(用于结构优化)</li>
  <li>IBRION=1：BFGS准牛顿方法(quasi-Newton RMM-DIIS),用于小范围内稳定结构的搜索</li>
  <li>IBRION=5,6等参考<a href="http://cms.mpi.univie.ac.at/vasp/vasp/IBRION_5_IBRION_6.html">VASP_manual</a>配合NFREE,POTIM用于计算震动频率,IBRION = 6和ISIF=3 用于计算弹性常数等<br />
NFREE 确定每个方向和离子使用多少个位移，POTIM确定步长。如果在输入文件中提供的值太大，则步长POTIM默认为0.015(VASP.5.1)</li>
</ul>

<p>NSW 控制几何结构优化的步数
<br />默认为0不进行优化,所以结构优化时必须设置</p>
<ul>
  <li>NSW=最大优化步数 <br />一般来说，简单的体系200步内就可以正常结束。初始结构很差，或者设置了很严格的收敛标准，可取NSW=500或者更大</li>
  <li>输出文件OSZICAR可以看到最终优化的步数,若优化步数小于NSW值表明达到收敛标准,- 若优化步数大于等于NSW值,可能
<br /> 1. NSW设置的偏小； 
<br /> 2. 初始结构不合理，计算需要更多的离子驰豫过程； 
<br /> 3. 设置的收敛标准太严格， 比如：-0.01 或者 -0.001； 
<br /> 4. 结构很复杂，每一离子步中的电子步骤收敛很困难
<br /> 5. 刚好收敛，可以通过OUTCAR中是否有<code class="highlighter-rouge">reached required accuracy - stopping structural energy minimisation</code>判断</li>
</ul>

<p>ISIF控制离子运动中计算应力张量，IBRION=0时默认0,其他情况默认2，常用2,3
<img src="/uploads/2018/01/isif.JPG" alt="" /></p>

<h3 id="nelm">NELM</h3>
<p>对应NSW为结构优化步数,NELM为电子优化步数,默认为60
<br />OSZICAR中,<code class="highlighter-rouge">DAV:   </code>后面跟着电子计算步数,若达到60停止计算，结果基本上无不符合物理规律
<br /></p>

<p>优化总结:</p>
<ul>
  <li>电子步（SCF）: EDIFF精度 &lt;====&gt; NELM计算步数</li>
  <li>离子步（结构优化）：EDIFFG 精度&lt;====&gt; NSW计算步数</li>
</ul>

<p>bbs.如果达到最大优化步数60</p>
<ul>
  <li>
    <p>1.如果第一个离子步中：SCF（也就是电子步）的计算不收敛，尝试下增加NELM的值；可以疯狂些： NELM = 500或者更高；</p>
  </li>
  <li>
    <p>2.检查下初始结构是否合理(比如与实验值差太大,原子距离过小)，如果合理，且加大NELM后依然不收敛，尝试下改变AMIX，BMIX，官网推荐的参数如下：<br /></p>
  </li>
</ul>
<div align="center"><img src="/uploads/2018/01/NELM.jpeg" /></div>
<ul>
  <li>3.第一个离子步收敛了，后面的不收敛，能量变的极大，首先应该想到的是去检查结构，一般在结构不合理的时候会出现类似的情况；调整结构再提交任务。
<br />第一直觉是去看结构而不是想着调节参数去怎么解决这个错误！！！
<br />结构不合适,调大了也没用</li>
</ul>

<h3 id="potim">POTIM</h3>
<p>在结构优化<code class="highlighter-rouge">IBRION=2</code>时,尝试移动原子的位置大小有POTIM决定<br />
默认值是0.50，可能造成过度移动最后没法矫正回来,可以设置的参数小一些如0.2<br />
初始结构不合理时,缩小POTIM的值可以降低过渡优化结果不符的可能<br /></p>

<p><strong>搭建好初始模型才是最省心的</strong></p>

<h3 id="encut-平面波截断能">ENCUT 平面波截断能</h3>
<p>例,单位eV</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ENCUT=250
</code></pre></div></div>
<p>侯:推荐手动输入<br />
bbs.计算多个元素进行对比时，建议统一固定一个值
bbs.如果计算时体积发生了变化，我们需要增加ENCUT的值，比如说：<br />
ENCUT = 1.3 * max(ENMAX) 即取POTCAR中ENMAX最大元素的ENMAX值。</p>
<h3 id="prec计算精度">PREC计算精度</h3>
<p>决定ENCUT,FFT的网格大小和ROPT的默认值</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PREC=Low|Medium|High|Normal|Accurate
</code></pre></div></div>

<h3 id="gga-voskown">GGA VOSKOWN</h3>
<p>POTCAR中的LEXCH与INCAR中GGA的设置对应
<br />LEXCH=CA(LDA赝势) GGA不设置 VOSKOWN不设置
<br />LEXCH=91(PW91赝势) GGA=91 VOSKOWN=1
<br />LEXCH=PE GGA=PE VOSKOWN不设置</p>
<h3 id="ismear-sigma">ISMEAR SIGMA</h3>
<h4 id="ismear">ISMEAR</h4>
<p>ISMEAR用来确定如何确定电子的部分占有数。</p>
<ul>
  <li>ISMEAR = -5，表示采用Blochl修正的四面体方法
<br />侯(侯柱峰老师).进行任何的静态计算或态密度计算，且k点数目大于4时，取ISMEAR = -5
<br />bbs.对所有体系,更加精确的时候用-5
<br />在DOS能带计算中,使用ISMEAR=-5画出的图形更平滑
<br /><strong>结构优化时不能使用ISMEAR=-5</strong>,计算DOS,结构保持不变可以使用ISMEAR=-5(半导体或绝缘体的计算(不论是静态还是结构优化)K点大于4，可取ISMEAR = -5)</li>
  <li>ISMEAR = -4，表示采用四面体方法，但是没有Blochl修正。</li>
  <li>ISMEAR = -1，表示采用Fermi-Dirac smearing方法。</li>
  <li>ISMEAR = 0，表示采用Gaussian smearing方法。
<br />原胞较大而k点数目较少（小于4个）时，取ISMEAR = 0，SIGMA取小一些如0.05
<br />一般说来，无论是对何种体系，进行何种性质的计算，采用ISMEAR =0，并选择一个合适的SIGMA值都能得到合理的结果
<br />bbs. 对于半导体和绝缘体体系,K点小于4, 一般用0
<br />对于分子,原子体系(也就是你把分子或者原子放到一个box里面),K点只有一个Γ点取ISMEAR=0，SIGMA必须要用很小的值,如0.01</li>
  <li>ISMEAR = N，表示采用N阶Methfessel-Paxton smearing方法，N为正整数</li>
</ul>

<p><br />
<a href="http://blog.sciencenet.cn/blog-567091-675253.html">【整理自好友lpf文章】用VASP计算能量态密度（DOS）和能带</a>文中提到
<br /><strong>非自洽计算能带：金属用ISMEAR=1；半导体或绝缘体，用ISMEAR=0</strong>
<br /><strong>计算DOS,用ISMEAR=-5更精确</strong>
<br /><br />
bbs.使用ISMEAR=-5和较多K点可用于计算DOS,以下情况不能使用ISMEAR=-5</p>
<ul>
  <li>模型很大=&gt;K点少(小于4个)</li>
  <li><strong>结构优化时不能取-5</strong>,(优化后计算DOS可设为-5)</li>
</ul>

<p>bbs.不能使用ISMEAR=-5时</p>
<ul>
  <li>增加K点(简单推荐)</li>
  <li>半导体绝缘体使用ISMEAR= 0(GS方法)(半导体绝缘体绝对不能大于0)</li>
  <li>金属,可以使用GS方法 ISMEAR = 0,也可以使用MP方法ISMEAR = 1, 2….N,一般来说,ISMEAR =0和 1 基本就可以了。(金属可以等于0,也可大于0)</li>
</ul>

<p><br />bbs.对所有的体系四面体方法（ISMEAR = -5）不适合计算能带</p>

<h4 id="sigma">SIGMA</h4>
<p>SIGMA的取值和ISMEAR息息相关</p>
<ul>
  <li>ISMEAR = -5 (对于所有体系),SIGMA的值可以忽略,也可以不管(VASP会自动略过)</li>
  <li>SIGMA的取值和KPOINTS密切相关,Kpoints确定之后,测试SIGMA取值合理性。标准是: grep ‘entropy T’  OUTCAR   得出的能量除以体系中原子的数目,小于0.001 eV 合格
<br /></li>
  <li>对于分子,原子体系(也就是你把分子或者原子放到一个box里面),K点只有一个Γ点取ISMEAR=0，SIGMA必须要用很小的值,如0.01</li>
  <li>
    <p>MP方法(ISMEAR=1..N):SIGMA取值太大,计算出来的能量可能不正确;SIGMA取值越小,计算越精确,需要的时间也就越多
<br />从经验上来说:对于金属体系,使用MP方法(ISMEAR=1..N)时,SIGMA= 0.10 足够了,官网给的参考值是0.20。</p>
  </li>
  <li>对于高斯展宽Gaussian Smearing (ISMEAR = 0),
<br /> 对于大部分的体系都能得到理想的结果
<br />SIGMA取值比较大的时候会得到与MP方法相近的误差;但是误差多大,GS方法不可以得到,而MP方法可以。从这一点上来说,MP要比GS好些;
<br />使用GS方法的时候(ISMEAR=0),SIGMA的数值要测试下,保证<code class="highlighter-rouge">grep "entropy T" OUTCAR |tail -1</code>结果平均到每个原子上小于0.001 eV也就是1meV。不想测试,对于金属体系:SIGMA=0.05是一个很安全的选择
<br />对于半导体和绝缘体,SIGMA取值要小,SIGMA = 0.01 – 0.05 之间也是很安全的。</li>
</ul>

<p>计算DOS的时候,KPOINTS设置的要大一些,ISMEAR要用-5。 <br />Kpoints因计算硬件限制不能设置的很大,数目小于3的时候,</p>
<ul>
  <li>对于金属,非金属体系均可以使用ISMEAR=0,SIGMA的数值需要测试一下,一般来说在0.01-0.05之间足够了。</li>
  <li>金属体系还可以用ISMEAR=1..N,官网建议SIGMA为0.20,太小的SIGMA值对收敛会产生影响。使用0.01-0.10的数值都是很安全的选择。</li>
</ul>

<p><strong>非DOS计算的时候,对于金属来说ISMEAR不能等于 -5</strong>,优先使用ISMEAR= 1。非金属来说(半导体和绝缘体),不能 &gt; 0 。对于所有的体系, ISMEAR= 0 则是一个很安全的选择,但SIGMA的数值要测试一下。</p>

<p>在进行能带计算时ISMEAR,SIGMA保持默认就好</p>

<h3 id="ncore-npar">NCORE NPAR</h3>
<p><a href="http://www.bigbrosci.cn/newsitem/277955358">Learn VASP The Hard Way （Ex21）：谁偷走的我的机时？（五）</a>看完还是不清楚，仅确定
<br />NCORE：控制多少个核同时计算；(?单个节点上的核)
<br />NPAR：如何把计算任务分配到计算资源上面计算(?使用的节点数)
<br />它们之间的关系是：NCORE= 计算使用的核数(mpirun分配?) / NPAR
<br />注意：这两个参数只能选取一个来使用
<br />bbs.NPAR实在不懂的话，直接设置NCORE=单节点的核数，单节点的核数/2，单节点的核数/4…….
<br />师兄.我们组服务器不设置NCORE等并行参数,保持默认就好</p>

<h3 id="nwrite">NWRITE</h3>
<p>决定OUTCAR中文件的信息，默认2<br />
对计算结果不影响,可选<br />
详细信息<a href="http://cms.mpi.univie.ac.at/vasp/vasp/NWRITE_tag.html">NWRITE_tag</a></p>

<h3 id="prec">PREC</h3>
<p>截图自苏长荣老师的VASP安装和使用说明
<img src="/uploads/2018/01/prec.JPG" alt="" /></p>

<h3 id="lcharg-是否输出chgchgcar">LCHARG 是否输出CHG,CHGCAR</h3>
<p>默认 LCHARG= .TRUE. 输出<br />
自洽计算LCHARG= .TRUE.输出CHG
<br />下一步非自洽计算时设置ICHAGR=11使用CHG计算DOS</p>
<h3 id="lwave-是否输出wavecar">LWAVE 是否输出WAVECAR</h3>
<p>默认 LWAVE= .TRUE. 输出<br />
(WAVECAR占空间比较大时,可以选中不输出)<br />
读取上一步计算的WAVECAR可以减少该步(自洽/非自洽)的计算时间,所以推荐输出<br />
使用ISTART=1使用上一步计算的WAVECAR(默认就是读取WAVECAR)</p>
<h3 id="loribt-是否输出投影波函数到procar-proout">LORIBT 是否输出投影波函数到PROCAR PROOUT</h3>
<ul>
  <li>LORBIT = 10 
<br />把态密度分解到每个原子以及原子的spd轨道上面，称为为局域态密度，Local DOS (LDOS)</li>
  <li>LORBIT =11 
<br />在10的基础上，还进一步分解到px，py，pz等轨道上，称为投影态密度（Projected DOS）或者分波态密度(Partial DOS)，即PDOS。
<br />所以LORBIT = 11可以提供我们更多的信息,<strong>计算DOS时设置为11</strong></li>
</ul>


        </article>
        <hr>

        
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
        
        <!--- github follow and star -->
        <iframe src="/html_script/github-btn.html?user=cndaqiang&repo=cndaqiang.github.io&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>
        <iframe src="/html_script/github-btn.html?user=cndaqiang&type=follow&count=true&size=large" frameborder="0" scrolling="0" width="220px" height="30px"></iframe>
        <div class="post-recent">
    <div class="pre">
        
        <p><strong>上一篇</strong> <a href="/2018/01/18/txt2dic/">利用python提取文献中的单词</a></p>
        
    </div>
    <div class="nex">

        
        <p><strong>下一篇</strong> <a href="/2018/01/21/vasp-output/">VASP输出文件总结</a></p>
        
    </div>
</div>

        <div id="adsense"></div>
<!-- 谷歌广告文章底部,夜广告，自适应 -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-8365330523291002"
     data-ad-slot="7816631956"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

        <hr>
        <h2 id="comments">评论</h2>
        




<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC80MDQ4OC8xNzAxNQ==">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->

		<hr>
		<h2 id="adsenseAfterComments">广告</h2>
        <div id="adsense"></div>
<!-- 谷歌广告文章底部,夜广告，自适应 -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-8365330523291002"
     data-ad-slot="7816631956"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

        

        


    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    目录
                </div>
                <ul id="content-side" class="content-ul">
                    
                    <li><a href="#comments">评论</a></li>
                </ul>
            </div>
            <!-- 其他div框放到这里 ，添加br 使不粘连--><br>
            <div class="side">
               <div>
                   <i class="fa fa-database"></i>
                  访客数据
               </div>
               <script type="text/javascript" src="//rf.revolvermaps.com/0/0/7.js?i=537vyn60ia7&amp;m=0&amp;c=007eff&amp;cr1=ff0000&amp;sx=0" async="async"></script>
            </div>
            <!-- <div class="side">bbbb</div> -->
        </div>
    </div>
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
             本站记录我的学习笔记！ 
        </p>
        <p class="contact">
            联系方式: 
            <a href="https://github.com/cndaqiang" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:who@cndaqiang.ac.cn" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>   
            <a href="https://www.zhihu.com/people/cndaqiang" title="Zhihu"><i class="iconfont icon-zhihu"></i></a>   
            <a href="http://www.jianshu.com/u/5d47905688d0" title="Jianshu"><i class="iconfont icon-jianshu"></i></a>  
            <a href="https://twitter.com/cndaqiang" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a>  
            <a href="https://www.facebook.com/daqiang.chen.12" title="Facebook"><i class="fa fa-facebook-official" aria-hidden="true"></i></a>    
        </p>
        <p>
            本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://cndaqiang.github.io/">cndaqiang</a>
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
        </p>
    </div>
</footer>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/smooth-scroll.min.js " charset="utf-8"></script>
    <script type="text/javascript">
      smoothScroll.init({
        speed: 500, // Integer. How fast to complete the scroll in milliseconds
        easing: 'easeInOutCubic', // Easing pattern to use
        offset: 20, // Integer. How far to offset the scrolling anchor location in pixels
      });
    </script>
    <!-- <script src=" /js/scroll.min.js " charset="utf-8"></script> -->
  </body>

</html>
